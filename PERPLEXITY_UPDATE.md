# ğŸ”„ ×¢×“×›×•× ×™ Perplexity - ××•×§×˜×•×‘×¨ 2025

## âš ï¸ ×©×™× ×•×™ ×§×¨×™×˜×™ - ×©××•×ª ××•×“×œ×™×

Perplexity ×©×™× ×ª×” ××ª ×©××•×ª ×”××•×“×œ×™× ×©×œ×” ×‘××•×§×˜×•×‘×¨ 2025. ×”××•×“×œ ×”×™×©×Ÿ ×›×‘×¨ ×œ× ×¢×•×‘×“!

### âŒ ××•×“×œ ×™×©×Ÿ (×œ× ×¢×•×‘×“ ×™×•×ª×¨):
```yaml
model: "llama-3.1-sonar-small-128k-online"
```
**×©×’×™××”:** HTTP 400 - "Invalid model"

### âœ… ××•×“×œ ×—×“×© (2025):
```yaml
model: "sonar"
```
**×¡×˜×˜×•×¡:** ×¢×•×‘×“ ××¦×•×™×Ÿ! âœ¨

---

## ğŸ“Š ×”××•×“×œ×™× ×”×—×“×©×™× ×©×œ Perplexity

| Model | Purpose | Speed | Cost | Best For |
|-------|---------|-------|------|----------|
| **sonar** | Fast search with grounding | âš¡âš¡âš¡ | $ | Quick factual queries, real-time data |
| **sonar-pro** | Advanced search | âš¡âš¡ | $$ | Complex queries, follow-ups |
| **sonar-reasoning** | Problem-solving with CoT | âš¡ | $$$ | Multi-step analysis, deep thinking |
| **sonar-deep-research** | Comprehensive reports | ğŸŒ | $$$$ | In-depth research projects |

**×‘×—×¨× ×•:** `sonar` - ××”×™×¨, ×–×•×œ, ××•×©×œ× ×œ× ×™×ª×•×— ×¤×™× × ×¡×™ ×‘×–××Ÿ ×××ª

---

## ğŸ”§ ×§×‘×¦×™× ×©×¢×•×“×›× ×•

### 1. âœ… MarketPulse (××¢×¨×›×ª ×¤×™× × ×¡×™×ª ×—×“×©×”)
```
âœ… MarketPulse/app/config.yaml - ××•×“×œ ×¢×•×“×›×Ÿ ×œ-"sonar"
âœ… MarketPulse/app/financial/perplexity_analyzer.py - ××•×“×œ ×¢×•×“×›×Ÿ
âœ… MarketPulse/test_perplexity_direct.py - ××•×“×œ ×¢×•×“×›×Ÿ
```

### 2. âœ… TARIFF RADAR (××¢×¨×›×ª ×§×™×™××ª)
```
âœ… tariff-radar/config.yaml - ××•×“×œ ×¢×•×“×›×Ÿ ×œ-"sonar"
```

**×©× ×™ ×”×¤×¨×•×™×§×˜×™× ×¢×›×©×™×• ××©×ª××©×™× ×‘××•×ª×• ××•×“×œ ××¢×•×“×›×Ÿ!**

---

## ğŸ§ª ×‘×“×™×§×•×ª ×©×‘×•×¦×¢×•

### Test #1: Direct API Call
```bash
py test_perplexity_direct.py
```
**×ª×•×¦××”:** âœ… HTTP 200 - SUCCESS!
- ×§×™×‘×œ× ×• × ×™×ª×•×— ××œ× ×©×œ AAPL
- 11 ××§×•×¨×•×ª (citations)
- 500 tokens ×ª×©×•×‘×”
- ×–××Ÿ ×ª×’×•×‘×”: ~2 ×©× ×™×•×ª

### Test #2: Full Module
```bash
py app/financial/perplexity_analyzer.py
```
**×ª×•×¦××”:** âœ… Perplexity client initialized
- Model: sonar
- API key: ××–×•×”×”
- Timeout: 30 ×©× ×™×•×ª
- ××•×›×Ÿ ×œ×©×™××•×© âœ¨

---

## ğŸ“ ××” ×—×“×© ×‘××¢×¨×›×ª?

### 1. **×§×•×‘×¥ ×”×’×“×¨×•×ª ××§×™×£** (`config.yaml`)
- ğŸ¯ **×¤×¨×•××¤×˜×™× × ×™×ª× ×™× ×œ×¢×¨×™×›×”** - ×›×œ ×”×¤×¨×•××¤×˜×™× ×‘××§×•× ××—×“
- ğŸ”§ **8 ×¡×•×’×™ × ×™×ª×•×—×™×** - ×× ×™×•×ª, ××™×¨×•×¢×™×, FDA, ×’××•×¤×•×œ×™×˜×™×§×”
- ğŸŒ **×ª××™×›×” ×‘×¢×‘×¨×™×ª** - × ×™×ª×Ÿ ×œ×”×’×“×™×¨ ×¤×¨×•××¤×˜×™× ×‘×¢×‘×¨×™×ª
- âš™ï¸ **×¤×¨××˜×¨×™× ××ª×§×“××™×** - temperature, max_tokens, timeouts

### 2. **××“×¨×™×š ×¢×¨×™×›×ª ×¤×¨×•××¤×˜×™×** (`PROMPTS_GUIDE.md`)
- ğŸ“– ×”×¡×‘×¨ ××¤×•×¨×˜ ××™×š ×œ×¢×¨×•×š ×›×œ ×¤×¨×•××¤×˜
- ğŸ’¡ ×“×•×’×××•×ª ×œ×©×™× ×•×™×™× × ×¤×•×¦×™×
- âœ… Do's and Don'ts
- ğŸ”„ ××“×¨×™×š ×‘×“×™×§×”

### 3. **××§×•×¨×•×ª ××™×“×¢ ××•×¨×—×‘×™×** (`DATA_SOURCES.md`)
- ğŸ“° Financial news (Reuters, Bloomberg, WSJ, CNBC)
- ğŸ›ï¸ Regulatory (SEC, FDA, USPTO, FTC)
- ğŸŒ Geopolitical (Reuters World, BBC)
- ğŸ’¬ Social media (Twitter, Reddit)
- ğŸ“Š Market data (Yahoo, Alpha Vantage)

---

## ğŸš€ ××™×š ××©×ª××©×™× ×‘×¤×¨×•××¤×˜×™×?

### ×“×•×’××” 1: × ×™×ª×•×— ×× ×™×” ×¤×©×•×˜
```python
from app.financial.perplexity_analyzer import PerplexityFinancialAnalyzer

analyzer = PerplexityFinancialAnalyzer()
insights = await analyzer.get_stock_insights("AAPL")

# ×”×ª×©×•×‘×” ×ª×›×œ×•×œ:
# - analysis: ×”× ×™×ª×•×— ×”××œ× ×-Perplexity
# - citations: ××§×•×¨×•×ª ×”××™×“×¢ (×¢×“ 5)
# - timestamp: ××ª×™ ×‘×•×¦×¢ ×”× ×™×ª×•×—
# - model: ××™×–×” ××•×“×œ ×©×™××©
```

### ×“×•×’××” 2: ×¢×¨×™×›×ª ×¤×¨×•××¤×˜
×¤×ª×—: `MarketPulse/app/config.yaml`

××¦×:
```yaml
prompts:
  stock_analysis:
    user_template: |
      Analyze {symbol} stock and provide...
```

×©× ×” ×œ:
```yaml
prompts:
  stock_analysis:
    user_template: |
      × ×ª×— ××ª ×”×× ×™×” {symbol} ×•×ª×Ÿ ×œ×™:
      1. ×›×™×•×•×Ÿ ×”××—×™×¨ - ×¢×•×œ×”/×™×•×¨×“×ª/×¨×•×—×‘×™
      2. ×”××œ×¦×” - ×§× ×”/××›×•×¨/×”××ª×Ÿ
      3. ×™×¢×“ ××—×™×¨ ×•-stop loss
      4. ×¨××ª ×‘×™×˜×—×•×Ÿ
```

×©××•×¨ ×•×ª×¨×™×¥ ×©×•×‘ - ×”×¤×¨×•××¤×˜ ×¢×•×“×›×Ÿ!

---

## ğŸ¯ ×”××œ×¦×•×ª ×©×™××•×©

### ×œ× ×™×ª×•×— ×™×•××™×•××™ ××”×™×¨:
```yaml
model: "sonar"           # ××”×™×¨ ×•×–×•×œ
temperature: 0.2         # ×¢×§×‘×™
max_tokens: 500          # ×ª××¦×™×ª×™
```

### ×œ××—×§×¨ ××¢××™×§:
```yaml
model: "sonar-pro"       # ×™×•×ª×¨ ××ª×§×“×
temperature: 0.3         # ××¢×˜ ×™×•×ª×¨ ×™×¦×™×¨×ª×™
max_tokens: 2000         # ××¤×•×¨×˜
```

### ×œ×—×©×™×‘×” ××•×¨×›×‘×ª:
```yaml
model: "sonar-reasoning" # ×¢× Chain of Thought
temperature: 0.2         # ××“×•×™×§
max_tokens: 1500         # ××§×•× ×œ×—×©×™×‘×”
```

---

## âœ… ×¡×˜×˜×•×¡ × ×•×›×—×™

| Component | Status | Notes |
|-----------|--------|-------|
| Perplexity API | âœ… ×¢×•×‘×“ | ××•×“×œ `sonar` ××¢×•×“×›×Ÿ |
| MarketPulse Config | âœ… ××•×›×Ÿ | 8 ×¤×¨×•××¤×˜×™× ×–××™× ×™× |
| TARIFF RADAR | âœ… ××¢×•×“×›×Ÿ | ××•×“×œ `sonar` |
| Documentation | âœ… ××œ× | PROMPTS_GUIDE.md |
| Data Sources | âœ… ××•×’×“×¨ | DATA_SOURCES.md |

---

## ğŸ”œ ×”×¦×¢×“×™× ×”×‘××™×

1. **×¢×“×›×Ÿ ×¤×¨×•××¤×˜×™× ×œ×¤×™ ×¦×•×¨×š ×©×œ×š** - ×¢×¨×•×š `config.yaml`
2. **×‘×“×•×§ ×©×”×›×œ ×¢×•×‘×“** - ×”×¨×¥ `test_perplexity_direct.py`
3. **×”×ª×—×œ ×œ×”×©×ª××© ×‘××¢×¨×›×ª** - `py app/main_production_enhanced.py`

---

## ğŸ“š ×§×™×©×•×¨×™× ××•×¢×™×œ×™×

- [Perplexity API Docs](https://docs.perplexity.ai/getting-started/models)
- [PROMPTS_GUIDE.md](./PROMPTS_GUIDE.md) - ××“×¨×™×š ××œ× ×œ×¢×¨×™×›×ª ×¤×¨×•××¤×˜×™×
- [DATA_SOURCES.md](./DATA_SOURCES.md) - ××§×•×¨×•×ª ×”××™×“×¢ ×©×œ ×”××¢×¨×›×ª

---

**×ª××¨×™×š ×¢×“×›×•×Ÿ:** 19 ××•×§×˜×•×‘×¨ 2025  
**×’×¨×¡×”:** MarketPulse v1.0  
**×¡×˜×˜×•×¡:** âœ… Production Ready
